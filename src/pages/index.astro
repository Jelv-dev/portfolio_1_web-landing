---
import Layout from "../layouts/Layout.astro";
import ServicesGrid from "../components/ServicesGrid.astro";
import TestimonialBlock from "../components/TestimonialBlock.astro";
import FAQSection from "../components/FAQSection.astro";
import ContactForm from "../components/ContactForm.astro";
import Footer from "../components/Footer.astro";
import heroImage from "../assets/automation-hero.png";

const servicesData = [
  {
    title: "Automatización de Procesos Clave",
    description:
      "Eliminamos tareas manuales repetitivas que drenan el tiempo de su equipo.",
    icon: "cpu-chip",
  },
  {
    title: "Estructura de Datos Escalonable",
    description:
      "Diseño de bases de datos que soportan el crecimiento de 5x sin fallos.",
    icon: "circle-stack",
  },
  {
    title: "Auditoría de Rendimiento Web",
    description:
      "Análisis técnico profundo para garantizar Lighthouse 100/100 y SEO perfecto.",
    icon: "rocket-launch",
  },
];
---

<Layout
  title="Ascendia Digital: Automatización para Escalar tu Negocio"
  description="Transforma el caos operacional en sistemas escalables y rentables con consultoría de alto valor."
>
  <!-- Bloque de Éxito del Formulario -->
  <div
    id="success-message"
    class="fixed top-0 left-0 w-full z-[100] bg-accent p-4 text-center transform -translate-y-full transition-transform duration-500"
  >
    <p class="text-gray-900 font-bold">
      ✅ ¡Éxito! Su solicitud ha sido recibida. Pronto nos pondremos en
      contacto.
    </p>
  </div>

  <!-- HEADER -->
  <header class="sticky top-0 z-50 py-4 bg-gray-950/90 backdrop-blur-md h-16">
    <div class="max-w-7xl mx-auto px-4 flex items-center justify-between">
      <div class="flex items-center gap-4">
        <!-- Botón de Hamburguesa para móvil -->
        <button
          id="menu-toggle"
          class="md:hidden text-white focus:outline-none"
          aria-label="Abrir menú"
        >
          <svg
            class="w-6 h-6"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
            ><path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M4 6h16M4 12h16m-7 6h7"></path></svg
          >
        </button>
        <a
          href="#"
          class="font-bold text-xl"
          aria-label="Ir al inicio de la página">Ascendia Digital</a
        >
      </div>
      <nav class="hidden md:flex items-center gap-8">
        <a href="#servicios" class="hover:text-accent transition-colors"
          >Servicios</a
        >
        <a href="#testimonios" class="hover:text-accent transition-colors"
          >Testimonios</a
        >
        <a href="#faq" class="hover:text-accent transition-colors">FAQ</a>
      </nav>
      <a
        id="header-cta"
        href="#contacto"
        class="hidden md:inline-block bg-accent text-gray-900 font-bold px-4 py-2 rounded-md hover:bg-emerald-400 transition-colors"
      >
        Agenda Tu Consultoría
      </a>
    </div>
  </header>

  <!-- Menú Off-Canvas para móvil -->
  <div id="menu-overlay" class="fixed inset-0 bg-black/50 z-30 hidden"></div>
  <div
    id="mobile-menu"
    class="fixed top-16 bottom-0 left-0 w-64 bg-gray-950/90 backdrop-blur-md z-40 transform -translate-x-full transition-transform duration-300"
  >
    <nav class="flex flex-col p-8 gap-8">
      <a href="#servicios" class="text-xl hover:text-accent transition-colors"
        >Servicios</a
      >
      <a href="#testimonios" class="text-xl hover:text-accent transition-colors"
        >Testimonios</a
      >
      <a href="#faq" class="text-xl hover:text-accent transition-colors">FAQ</a>
      <a
        href="#contacto"
        class="bg-accent text-gray-900 font-bold p-3 mt-4 text-center rounded-md"
      >
        Agenda Tu Consultoría
      </a>
    </nav>
  </div>

  <!-- HERO SECTION -->
  <main>
    <div class="max-w-7xl mx-auto px-4">
      <section
        class="min-h-[85vh] grid grid-cols-1 md:grid-cols-12 gap-8 items-center"
      >
        <!-- Bloque de Texto -->
        <div class="md:col-span-7 pt-10 md:pt-0">
          <h1 class="text-5xl font-extrabold text-center mb-12">
            SISTEMAS INTELIGENTES PARA EL MÁXIMO ESCALADO
          </h1>
          <p class="text-xl text-gray-200 mb-8">
            Convertimos tus operaciones manuales en sistemas automatizados que
            escalan. Aumenta tu rentabilidad y libera a tu equipo para que se
            enfoque en crecer.
          </p>
          <a
            href="#contacto"
            class="inline-block bg-accent text-gray-900 font-bold px-8 py-4 text-lg rounded-md hover:bg-emerald-400 transition-all duration-300 hover:translate-y-[-2px] hover:shadow-lg hover:shadow-accent/30"
            role="button"
          >
            Agenda Tu Consultoría
          </a>
        </div>

        <!-- Bloque Visual (Gráfico Abstracto) -->
        <div class="relative md:col-span-5 h-full min-h-[300px] md:min-h-0">
          <img
            src={heroImage.src}
            alt="Gráfico de automatización de datos"
            width="1024"
            height="1024"
            loading="eager"
            decoding="async"
            fetchpriority="high"
            class="w-full h-full object-contain"
          />
        </div>
      </section>

      <!-- SERVICES SECTION -->
      <section id="servicios" class="py-16">
        <h2 class="text-5xl font-extrabold text-center mb-12">
          NUESTROS SISTEMAS DE ALTO VALOR
        </h2>
        <ServicesGrid services={servicesData} />
      </section>

      <!-- TESTIMONIALS SECTION -->
      <section id="testimonios">
        <TestimonialBlock />
      </section>

      <!-- FAQ SECTION -->
      <section id="faq" class="py-16">
        <h2 class="text-5xl font-extrabold text-center mb-12">
          PREGUNTAS FRECUENTES (SEO/IA)
        </h2>
        <FAQSection />
      </section>

      <!-- CONTACT/CTA SECTION -->
      <section id="contacto" class="py-16 text-center">
        <h2 class="text-5xl font-extrabold text-center mb-4">
          ¿LISTO PARA ESCALAR?
        </h2>
        <p class="text-2xl text-gray-300 text-center mb-10">
          Agenda tu consultoría estratégica de 15 minutos.
        </p>
        <ContactForm />
      </section>
    </div>
  </main>
  <Footer />
</Layout>

<script is:inline>
  // Script para mostrar el banner de éxito
  if (window.location.hash === "#success") {
    const successBanner = document.getElementById("success-message");
    if (successBanner) {
      // Eliminar la clase de ocultamiento (transform -translate-y-full)
      successBanner.classList.remove("transform", "-translate-y-full");

      // Opcional: Eliminar el hash de la URL después de un breve momento para limpiar la URL de la barra de direcciones
      setTimeout(() => {
        // Utilizamos replaceState para no añadir una entrada al historial del navegador
        history.replaceState(
          null,
          "",
          window.location.pathname + window.location.search
        );
      }, 1000);
    }
  }

  // Lógica para el menú de hamburguesa
  const menuToggle = document.getElementById("menu-toggle");
  const mobileMenu = document.getElementById("mobile-menu");
  const menuOverlay = document.getElementById("menu-overlay");
  const menuLinks = mobileMenu.querySelectorAll("a");

  function toggleMenu() {
    mobileMenu.classList.toggle("-translate-x-full");
    menuOverlay.classList.toggle("hidden");
  }

  menuToggle.addEventListener("click", toggleMenu);
  menuOverlay.addEventListener("click", toggleMenu);

  // Cierra el menú al hacer clic en un enlace
  menuLinks.forEach((link) => {
    link.addEventListener("click", () => {
      // Añadimos un pequeño retraso para que se vea la transición del scroll
      setTimeout(() => {
        if (!mobileMenu.classList.contains("-translate-x-full")) {
          toggleMenu();
        }
      }, 150);
    });
  });
</script>
